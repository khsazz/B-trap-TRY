<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <title>Doctor Koi</title>

    <!-- Tell the browser to be responsive to screen width -->
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport"/>
    <link rel="icon" type="image/png" href="custom/favicon.png" th:href="@{/resources/custom/favicon.png}" sizes="64x64" />
    <!-- Bootstrap 3.3.5 -->
    <link rel="stylesheet" href="bootstrap/css/bootstrap.min.css"
          th:href="@{/resources/bootstrap/css/bootstrap.min.css}"/>
    <!--Font Family-->
    <link href='https://fonts.googleapis.com/css?family=Roboto:400,500' rel='stylesheet' type='text/css'>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css"/>
    <!-- Ionicons -->
    <link rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css"/>
    <!--BootStrap Select-->
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.9.4/css/bootstrap-select.min.css">
    <!-- DatePicker CSS -->
    <link rel="stylesheet" href="plugins/datepicker/datepicker3.css"
          th:href="@{/resources/plugins/datepicker/datepicker3.css}"/>
    <!-- Theme style -->
    <link rel="stylesheet" href="dist/css/AdminLTE.min.css"
          th:href="@{/resources/dist/css/AdminLTE.min.css}"/>
    <!-- Custom CSS -->
    <link rel="stylesheet" href="custom/style.css"
          th:href="@{/resources/custom/style.css}"/>
    <link rel="stylesheet" href="dist/css/skins/skin-green.min.css"
          th:href="@{/resources/dist/css/skins/skin-green.min.css}"/>
</head>

<body class="skin-green layout-top-nav" style="padding-top: 80px;">
<div class="wrapper">

    <!-- Main Header -->
    <nav class="navbar navbar-fixed-top navbarshadow" style="background-color: #ffffff">
        <div class="container">
            <div class="navbar-header">
                <a href="/admin/dashboard" class="navbar-brand">
                    <img src="custom/logo_color.png" class="img-responsive"
                         th:src="@{/resources/custom/logo_color.png}" alt="" width="30%"/>
                </a>
            </div>
            <!--<div class="navbar-custom-menu" style="text-align: right">-->
                <!--<p style="color: #43a260">-->
                    <!--<i class="fa fa-phone"></i>-->
                    <!--01711-111222    <button class="btn btn-xs btn-success">Sign IN</button></p>-->
                <!--<p style="color: #a7a8a7">-->
                    <!--Are you a doctor? List your practice here-->
                    <!--<button class="btn btn-sm iamadoctor-button"> <strong>I'M A DOCTOR</strong> </button></p>-->
            <!--</div>-->
        </div>
    </nav>

    <div class="content-wrapper">
        <div class="row">&nbsp;</div>
        <!--<div class="row">&nbsp;</div>-->
        <!--<div class="row">&nbsp;</div>-->

        <section class="content" style="padding: 0;">
            <!-- Your Page Content Here -->
            <div class="row">
                <div class="col-lg-12">
                    <form role="form" action="/admin/search" method="get">
                        <div class="col-lg-3 col-md-3 col-sm-3">
                            <select id="speciality" name="speciality" class="form-control select-custom1"
                                    title="Choose a Speciality" th:attr="data-speciality=${selectedSpeciality}">
                                <option value="0" selected disabled>Pick A Specialty</option>
                                <option th:each="speciality : ${specialityList}"
                                        th:text="${speciality.description}" th:value="${speciality.id}">
                                </option>
                            </select>
                        </div>
                        <div class="col-lg-3 col-md-3 col-sm-3">
                            <div class="form-group input-group">
                                <div class="input-group-addon">
                                    <i class="fa fa-calendar"></i>
                                </div>
                                <input id="datepicker" name="date" class="form-control pull-right datepicker"
                                       th:attr="data-day=${selectedDay},
                                   data-month=${selectedMonth}, data-year=${selectedYear}"/>
                            </div>
                        </div>
                        <div id="hospitalList" class="col-lg-3 col-md-3 col-sm-3 dropdown">
                            <select id="hospital" name="hospital" class="form-control select-custom1"
                                    th:attr="data-hospital=${selectedHospital}">
                                <option value="0" selected disabled>Pick A Hospital</option>
                                <option th:each="hospital : ${hospitalList}"
                                        th:text="${hospital.name}" th:value="${hospital.id}"
                                        style="color: black; background-color: transparent;">One
                                </option>
                            </select>
                        </div>
                        <div class="col-lg-3 col-md-3 col-sm-3">
                            <button type="submit" class="btn btn-success btn-block">Search Again</button>
                        </div>
                    </form>
                </div>
            </div>

            <div class="row">
                <div class="col-lg-8 col-lg-offset-2">
                    <div class="box box-success">
                        <div class="box-header bg-green">
                            <h3 class="box-title "><i class="fa fa-fw fa-stethoscope"></i><strong> Pick Your
                                Doctor</strong></h3>
                        </div>

                        <div class="box-body table-responsive no-padding">

                            <table id="datatable" class="table table-hover">
                                <thead>
                                <tr>
                                    <th></th>
                                </tr>
                                </thead>
                                <tbody th:remove="all-but-first">

                                <tr class="clickable-row" th:each="doctor : ${doctorList}">
                                    <td class="search-result-box border-zero" data-href="/doctorprofile/"
                                        th:attr="data-user=${doctor.id}">

                                        <div class="info-box  box-shadow-zero custom-margin-top-bottom">
                                                <!--<span class="info-box-icon image">-->
                                                    <!--<img class="img vertical-align-top" src="dist/img/noimage.jpg" alt="User Avatar"-->
                                                         <!--th:src="@{/resources/dist/img/{img}.jpg(img='noimage')}">-->
                                                <!--</span>-->

                                            <div class="info-box-content">
                                                <div class="col-lg-9 col-md-9">
                                                    <span class="info-box-text doctor-name" style="font-size: 16px;"
                                                          th:utext=" '<strong>'+${doctor.name}+'</strong>' ">
                                                        <strong>Doctor's Name10</strong>
                                                    </span>
                                                    <p class="specialty margin-zero" style="font-size: 12px;" th:utext="${doctor.specialityText}">
                                                        <strong>Speciality : </strong>Neurology
                                                    </p>
                                                    <p class="designation margin-zero" th:text="${doctor.designation}" style="font-size: 12px;">
                                                        Degrees & Bla Blahs
                                                    </p>
                                                    <p class="margin-zero hospital" th:text="${doctor.hospitalName}"
                                                       style="font-size: 12px;">
                                                        <strong>Hospital</strong>
                                                    </p>
                                                    <span class="week" style="font-size: 12px;">
                                                        <i class="fa fa-calendar"></i>
                                                        <span th:if="${doctor.detailedAvailability.sun}"
                                                              class="weekday-active">Su</span>
                                                        <span th:unless="${doctor.detailedAvailability.sun}"
                                                              class="weekday-inactive">Su</span>
                                                        <span th:if="${doctor.detailedAvailability.mon}"
                                                              class="weekday-active">M</span>
                                                        <span th:unless="${doctor.detailedAvailability.mon}"
                                                              class="weekday-inactive">M</span>
                                                        <span th:if="${doctor.detailedAvailability.tue}"
                                                              class="weekday-active">Tu</span>
                                                        <span th:unless="${doctor.detailedAvailability.tue}"
                                                              class="weekday-inactive">Tu</span>
                                                        <span th:if="${doctor.detailedAvailability.wed}"
                                                              class="weekday-active">W</span>
                                                        <span th:unless="${doctor.detailedAvailability.wed}"
                                                              class="weekday-inactive">W</span>
                                                        <span th:if="${doctor.detailedAvailability.thu}"
                                                              class="weekday-active">Th</span>
                                                        <span th:unless="${doctor.detailedAvailability.thu}"
                                                              class="weekday-inactive">Th</span>
                                                        <span th:if="${doctor.detailedAvailability.fri}"
                                                              class="weekday-active">F</span>
                                                        <span th:unless="${doctor.detailedAvailability.fri}"
                                                              class="weekday-inactive">F</span>
                                                        <span th:if="${doctor.detailedAvailability.sat}"
                                                              class="weekday-active">Sa</span>
                                                        <span th:unless="${doctor.detailedAvailability.sat}"
                                                              class="weekday-inactive">Sa</span>
                                                    </span>
                                                    <span  class="info-box-text time">
                                                        <i class="fa fa-clock-o"></i>
                                                        <span th:text="${doctor.detailedAvailability.start_end}"
                                                              style="font-size: 12px; color: #3b9349">
                                                            3.00 PM - 9.00 PM
                                                        </span>
                                                    </span>
                                                </div>
                                                <div class="col-lg-3 col-md-3">
                                                    <!--<th:block th:switch="${doctor.rankValue}">-->
                                                        <!--<div th:case="3">-->
                                                            <!--<span class="star-icon full three">☆☆☆☆☆</span>-->
                                                        <!--</div>-->
                                                        <!--<div th:case="4">-->
                                                            <!--<span class="star-icon full four">☆☆☆☆☆</span>-->
                                                        <!--</div>-->
                                                        <!--<div th:case="5">-->
                                                            <!--<span class="star-icon full five">☆☆☆☆☆</span>-->
                                                        <!--</div>-->
                                                    <!--</th:block>-->
                                                    <!--<p class="text-success"-->
                                                       <!--th:utext=" 'Within ~ '+ ${doctor.distance} + ' km'">-->
                                                    <!--</p>-->
                                                    <button type="button" class="btn btn-success btn-sm modal-button"
                                                            data-toggle="modal" data-target="#bookModal"
                                                            th:attr="data-doctor=${doctor.id},
                                                             data-availability=${doctor.detailedAvailability.start_end}">
                                                        <strong> Book Now</strong>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

        </section>
    </div>

    <!-- Modal -->
    <div class="modal fade" id="bookModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-body" style="padding: 0">
                    <div class="box box-success box-solid" style="border: 0">
                        <div class="box-header with-border">
                            <h3 class="box-title">
                                <strong style="text-align: center;">BOOK YOUR APPOINTMENT</strong>
                            </h3>
                        </div>

                        <div class="box-body">
                            <div class="row">
                                <div class="col-lg-1"></div>
                                <div id="modalImage" class="col-lg-2"></div>
                                <div class="col-lg-9">
                                    <h2 id="modalDoctorName" class="text-primary margin-zero"></h2>
                                    <h4 id="modalSpecialty" class="margin-zero"></h4>
                                    <h4 id="modalDesignation" class="margin-zero"></h4>
                                    <h4 id="modalHospitalName" class="margin-zero"></h4>
                                    <h4 id="modalOffDay" style="margin-top: 1px;"></h4>
                                    <h4 id="modalTime"></h4>
                                </div>
                            </div>
                            <form action="/admin/createBooking" method="post" class="form-horizontal" role="form">
                                <div class="form-group">
                                    <label class="control-label col-sm-4 color-green" for="patient_name">BOOKING NAME</label>
                                    <div class="col-sm-6">
                                        <input type="text" class="form-control border-green" placeholder="Enter your name"
                                               name="patient_name" id="patient_name" required/>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-sm-4 color-green" for="patient_mobile">CONTACT NUMBER</label>
                                    <div class="col-sm-6">
                                        <input type="number" class="form-control border-green" placeholder="Mobile No"
                                               name="patient_mobile" id="patient_mobile" required/>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-sm-4 color-green" for="datepickerInModal">APPOINTMENT DATE</label>
                                    <div class="col-sm-6">
                                        <div class="input-group border-green" style="z-index: 100000 !important;">
                                            <div class="input-group-addon"><i class="fa fa-calendar"></i></div>
                                            <input id="datepickerInModal" type="text" name="date"
                                                   class="form-control pull-right datepicker">
                                        </div>
                                    </div>
                                </div>
                                <div class="row">&nbsp;</div>
                                <div class="row" align="center">
                                    <button type="submit" class="btn btn-success">BOOK NOW</button>
                                    <button type="button" class="btn btn-danger border-zero" data-dismiss="modal"
                                            style="background-color: #434243">CANCEL</button>
                                </div>
                                <input id="doctor" name="doctor" value="" hidden>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Footer -->
    <footer class="main-footer">
        <div class="row">
            <div class="col-lg-2 col-sm-2 text-right">
                <img src="custom/logo_bnw.png" th:src="@{/resources/custom/logo_bnw.png}"
                     class="img-responsive" width="30%" style="margin-right: 20px;">
            </div>
            <div class="col-lg-10 col-sm-10" style="padding-top: 20px;">
                <a style="color: #f0f1d6" href="#">Frequently Asked Questions</a> |
                <a style="color: #f0f1d6" href="#">About DoctorKoi</a> |
                Copyright &copy; 2016 <strong>DoctorKoi</strong> All rights reserved |
                <a style="color: #f0f1d6" href="#">Privacy Policy</a> |
                <a style="color: #f0f1d6" href="#">Terms and Use</a>
            </div>
        </div>
    </footer>

</div>

<!-- REQUIRED JS SCRIPTS -->
<!-- jQuery 2.1.4 -->
<script src="plugins/jQuery/jQuery-2.1.4.min.js"
        th:src="@{/resources/plugins/jQuery/jQuery-2.1.4.min.js}"></script>
<!-- Bootstrap 3.3.5 -->
<script src="bootstrap/js/bootstrap.min.js"
        th:src="@{/resources/bootstrap/js/bootstrap.min.js}"></script>
<!-- AdminLTE App -->
<script src="dist/js/app.min.js"
        th:src="@{/resources/dist/js/app.min.js}"></script>
<!--Bootstrap select-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.9.4/js/bootstrap-select.min.js"></script>
<!-- DataTables -->
<script src="plugins/datatables/jquery.dataTables.min.js"
        th:src="@{/resources/plugins/datatables/jquery.dataTables.min.js}"></script>
<script src="plugins/datatables/dataTables.bootstrap.min.js"
        th:src="@{/resources/plugins/datatables/dataTables.bootstrap.min.js}"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $('#datatable').DataTable({
            searching: false,
            ordering: false,
            lengthChange: false,
            dom: 't<"#head1.row"<"col-sm-12"<"pull-right" p>>>'
        });
        $('#datatable').DataTable().page.len(10).draw();
    });
</script>
<!-- Datepicker -->
<script src="plugins/datepicker/bootstrap-datepicker.js"
        th:src="@{/resources/plugins/datepicker/bootstrap-datepicker.js}"></script>
<script>
    $(document).ready(function () {
        $(document).off('.datepicker.data-api');
        $('#datepickerInModal').datepicker({
            format: "dd/mm/yyyy",
            todayHighlight: true,
            autoclose: true,
            startDate: new Date(),
            parentEl: '#bookModal'
        });
        $('#datepicker').datepicker({
            format: "dd/mm/yyyy",
            todayHighlight: true,
            autoclose: true,
            startDate: new Date()
        });
        if ($("#datepicker").data("day")) {
            $('#datepicker').datepicker('setDate', new Date($("#datepicker").data("year"),
                    $("#datepicker").data("month"), $("#datepicker").data("day")));
            $('#datepickerInModal').datepicker('setDate', new Date($("#datepicker").data("year"),
                    $("#datepicker").data("month"), $("#datepicker").data("day")));
        } else {
            $('#datepicker').datepicker('update', new Date());
            $('#datepickerInModal').datepicker('update', new Date());
        }
//        $('#timepicker1').timepicker();
    });
</script>
<!--For Modal Show Activity-->
<script>
    $('#bookModal').on('show.bs.modal', function(e) {
//        datepicker also fires this event
        if($(e.relatedTarget).data('doctor')){
            var doctorId = $(e.relatedTarget).data('doctor');
            var doctorAvailability = $(e.relatedTarget).data('availability');
            //populate the textbox
            $(e.currentTarget).find('input[name="doctor"]').val(doctorId);
            if($(e.relatedTarget).parent().prev().children("span.week")) {
                var infoParent = $(e.relatedTarget).parent().prev();
                var infoDoctorName = infoParent.children("span.doctor-name");
                var modalDoctorName = document.getElementById("modalDoctorName");
                $('#modalDoctorName').empty();
                infoDoctorName.clone().appendTo(modalDoctorName);
                var infoHospital = infoParent.children("p.hospital");
                var modalHospital = document.getElementById("modalHospitalName");
                $('#modalHospitalName').empty();
                infoHospital.clone().appendTo(modalHospital);
                var infoWeekDay = infoParent.children("span.week");
                var modalWeekDay = document.getElementById("modalOffDay");
                $('#modalOffDay').empty();
                infoWeekDay.clone().appendTo(modalWeekDay);
                var infoTime = infoParent.children("span.time");
                var modalTime = document.getElementById("modalTime");
                $('#modalTime').empty();
                infoTime.clone().appendTo(modalTime);
                var infoSpecialty = infoParent.children("p.specialty");
                var modalSpecialty = document.getElementById("modalSpecialty");
                $('#modalSpecialty').empty();
                infoSpecialty.clone().appendTo(modalSpecialty);
                var infoDesignation = infoParent.children("p.designation");
                var modalDesignation = document.getElementById("modalDesignation");
                $('#modalDesignation').empty();
                infoDesignation.clone().appendTo(modalDesignation);
                var infoImage = $(e.relatedTarget).parent().parent().parent().children("span.image");
                var modalImage = document.getElementById("modalImage");
                $('#modalImage').empty();
                infoImage.clone().appendTo(modalImage);
            }
        }
    });
</script>
<!--Select the correct value for dropdown -->
<script>
    $(document).ready(function () {
        $("#speciality").val($("#speciality").data("speciality"));
        $("#hospital").val($("#hospital").data("hospital"));
    });
</script>
<!--Search Results Click Function-->
<script type="text/javascript">
    $(document).ready(function () {
        $(document).on('click', 'tr', function () {
            if ($(this).children("td.border-zero").data("user")) {
                var href = $(this).children("td.border-zero").data("href");
                var user = $(this).children("td.border-zero").data("user");
                var profileUrl = href + '' + user;
                window.location.href = profileUrl;
            }
        });
        $(document).on('click', '.modal-button', function (e) {
            e.stopPropagation();
        });
    });
</script>
</body>
</html>
